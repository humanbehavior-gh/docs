---
title: 'Next.js'
description: 'Set up HumanBehavior SDK with Next.js applications'
---

# Using HumanBehaviorTracker with Next.js

## Quickstart

Human Behavior works seamlessly to record sessions on your Next.js app.

## Step 1: Installation

```bash
npm install humanbehavior-js
# or
yarn add humanbehavior-js
```

## Step 2: Basic Setup

### Add the Tracker to Your App

Use the React provider for the best integration and automatic tracking:

**Step 1**: Create a separate providers file for client-side code:

Create `app/providers.tsx`:
```tsx
'use client' // Only the provider needs to be client-side

import { HumanBehaviorProvider } from 'humanbehavior-js/react'

export function Providers({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <HumanBehaviorProvider apiKey={process.env.NEXT_PUBLIC_HUMANBEHAVIOR_API_KEY!}>
      {children}
    </HumanBehaviorProvider>
  )
}
```

**Step 2**: Import the providers in your layout (which stays a Server Component):

In `app/layout.tsx`:
```tsx
import { Providers } from './providers'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body>
        <Providers>
          {children}
        </Providers>
      </body>
    </html>
  )
}
```

<Note>
  **Why use a separate providers file?** This pattern keeps your app layout as a Server Component while only making the provider client-side. This preserves the performance benefits of Server Components and ensures optimal rendering.
</Note>

<Note>
  **That's it!** The SDK now automatically tracks user interactions, navigation, and console events. Everything past here is optional.
</Note>

## Alternative: Manual Initialization

If you prefer manual setup, you can initialize the tracker directly:

```tsx
'use client' // This line is CRUCIAL - it tells Next.js this is a client component

import { useEffect } from 'react';
import { HumanBehaviorTracker } from 'humanbehavior-js';

function MyApp({ Component, pageProps }) {
  useEffect(() => {
    // Initialize the tracker once globally
    const tracker = HumanBehaviorTracker.init(process.env.NEXT_PUBLIC_HUMANBEHAVIOR_API_KEY);
  }, []);

  return <Component {...pageProps} />;
}

export default MyApp;
```

## Optional: Advanced Features

### Track Custom Events

```tsx
'use client'

import { useUserTracking } from 'humanbehavior-js/react';

function MyComponent() {
  const { identifyUser } = useUserTracking();

  const handleButtonClick = async () => {
    // Track custom event
    await tracker.customEvent('button_clicked', {
      buttonLocation: 'header'
    });
  };

  const handleLogin = async (user) => {
    // Identify user after successful authentication
    await identifyUser({
      userProperties: {
        email: user.email,
        name: user.name,
        userId: user.id
      }
    });
  };

  return (
    <div>
      <button onClick={handleButtonClick}>Click Me</button>
    </div>
  );
}
```

## Environment Variables

```bash
# .env.local
NEXT_PUBLIC_HUMANBEHAVIOR_API_KEY=your-api-key-here
```

```tsx
// In your code
const tracker = HumanBehaviorTracker.init(process.env.NEXT_PUBLIC_HUMANBEHAVIOR_API_KEY);
```

## Troubleshooting

- Make sure you're using `'use client'` at the top of your file
- Check browser console for any error messages
- Verify your API key is correct
- Ensure the tracker is initialized before any user interaction
