---
title: 'User Identification'
description: 'Identify and track users across sessions with persistent user IDs and properties'
---

HumanBehavior SDK automatically identifies and tracks users across sessions using persistent user IDs and properties.

## Automatic User Identification

The SDK handles user identification using cookies. A unique user ID is generated and stored in a cookie on first visit, and persists for 1 year. 
Initializing the SDK handles user authentication automatically.

## User Identification

### Server-side Identification (Recommended)

For the best user tracking experience, identify users server-side in your authentication events. This ensures users are identified immediately upon sign-in and maintains session continuity.

**NextAuth.js Example:**
```javascript
// In your NextAuth configuration
import { identifyUser } from 'humanbehavior-js';

export default NextAuth({
  events: {
    async signIn({ user, account }) {
      await identifyUser(
        user.id, // Database user ID
        {
          email: user.email,
          name: user.name,
          provider: account?.provider
        },
        process.env.HUMANBEHAVIOR_API_KEY
      );
    }
  }
});
```

**Firebase Auth Example:**
```javascript
// In your Firebase functions
exports.onUserCreated = functions.auth.user().onCreate((user) => {
  const { identifyUser } = require('humanbehavior-js');
  
  return identifyUser(
    user.uid, // Firebase user ID
    {
      email: user.email,
      displayName: user.displayName,
      provider: user.providerData[0]?.providerId
    },
    process.env.HUMANBEHAVIOR_API_KEY
  );
});
```

### Client-side Identification

You can also identify users client-side after successful authentication or for client-only applications:

<Note>
  **Placement:** Call `identifyUser` after successful login or signup, not during page initialization.
</Note>

```javascript
// After successful login/signup, identify the user with their actual ID
const userId = await tracker.identifyUser({
  userId: user.id,
  userProperties: {
    email: user.email,
    name: user.name,
    plan: user.plan
  }
});
```

### Logging out a user

When the user is finished with their session, you can log them out using the `logout` function. We highly
recommend doing this to prevent conflating user data or persisting it across sessions.

```javascript
// Log out the current user
tracker.logout();
```

### Complete Example 

```jsx title="AuthComponents.jsx"
import { useHumanBehavior } from 'humanbehavior-js/react';

function LoginForm() {
    const tracker = useHumanBehavior();
    
    const handleLogin = async (formData) => {   

      // ... Your authentication logic here ...

      // Upon successful authentication, identify user in the current session
      if (loginSuccessful) {
        const userId = await tracker.identifyUser({
          userId: user.id,
          userProperties: {
            email: user.email,
            name: user.name,
            plan: 'premium'
          }
        });
        console.log('User successfully identified:', userId);
      }

    }
    return (
        <form onSubmit={handleLogin}>
            {/* Your form fields */}
        </form>
    );
}

function LogOutButton() {
  const tracker = useHumanBehavior();

  const handleLogout = () => {

    // ... Your logout logic here ...

    tracker.logout();
  }

  return (
    <button onClick={handleLogout}>Log Out</button>
  );
}
```

## Privacy & Segmentation

- User properties are available in your analytics dashboard for segmentation and filtering
- You can update user info at any time (e.g., after signup, plan change)
- The SDK supports privacy regulations and pseudonymous IDs 

## Properties & Options

| Property/Option         | Type     | Description                                                        |
|------------------------|----------|--------------------------------------------------------------------|
| `userId`               | string   | Unique user ID (auto-generated and stored in a cookie by default).  |
| `identifyUser()`       | function | Identify user with properties (see below).                         |
| `userProperties`       | object   | Any key-value pairs (e.g., `email`, `name`, `plan`, etc.).         |
| `cookie`               | string   | Stores user ID for 365 days.                                       |

**`identifyUser(userId, userProperties)` fields:**

| Field         | Type     | Description                                 |
|-------------- |----------|---------------------------------------------|
| Any           | any      | You can provide any user property fields.    |
| Example:      |          |                                             |
| `email`       | string   | User's email address.                       |
| `name`        | string   | User's name.                                |
| `userId`      | string   | Your internal user ID.                      |
| `plan`        | string   | User's plan or segment.                     | 

